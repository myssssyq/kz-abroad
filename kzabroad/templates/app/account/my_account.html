{% extends "general/index.html" %}
{% block content %}
<p>
  About you:
</p>

<form method="post" enctype="multipart/form-data">{% csrf_token %}
  <label>Your name: </label>
  <input type="text" name="name" value="{{user.name}}"><br>
  <label>Your surname: </label>
  <input type="text" name="surname" value="{{user.surname}}"><br>
  <label>Your email: </label>
  <input type="text" name="email" value="{{user.email}}"><br>
  <label>Your password: </label>
  <input type="text" name="password" value="{{user.password}}"><br>
  {% if user.living_city %}
  <label> Do you want to be a guide? </label>
  <p>
  <input type="radio" name="yes">Yes</input>
  </p>
  <p>
  <input type="radio" name="no">No</input>
  </p>
  {% endif %}
  <button name = "change_form" type = "submit">Submit</button>
</form>

{% if not_approved_request %}

<p>
  <div class="card w-50">
  <div class="card-body">
    <h5 class="card-title">{{not_approved_request.guide.login}}</h5>
    <h5 class="card-title">{{not_approved_request.guide.name}} {{not_approved_request.guide.surname}} wants to GUIDE you in city</h5>
    <p class="card-text"></p>
    <p>
    <a href="{% url 'user' not_approved_request.guide.slug %}" class="btn btn-primary">Users page</a>
    <form id = "approve_form" enctype="multipart/form-data" method = "post">{% csrf_token %}
      <input type="hidden" name="approve_input" value="{{not_approved_request.guide.id}}"/>
      <p>
      <button name = "approve_accept" type = "submit"> Accept </button>
      <button name = "approve_decline" type = "submit"> Decline </button>
      </p>
    </form>
    </p>
  </div>
</div>

{% endif %}

{% if recieved_guide_requests %}

<label> Users asking for a guide in a city: </label>

{% for request in recieved_guide_requests%}
<p>
  <div class="card w-50">
  <div class="card-body">
    <h5 class="card-title">{{request.requesting_user.login}}</h5>
    <h5 class="card-title">{{request.requesting_user.name}} {{request.requesting_user.surname}} wants you to GUIDE him/her in city</h5>
    <p class="card-text"></p>
    <p>
    <a href="{% url 'user' request.requesting_user.slug %}" class="btn btn-primary">Users page</a>
    <form id = "request_form" enctype="multipart/form-data" method = "post">{% csrf_token %}
      <input type="hidden" name="request_input" value="{{request.requesting_user.id}}"/>
      <p>
      <button name = "guide_accept" type = "submit"> Accept </button>
      </p>
    </form>
    </p>
  </div>
</div>

{% endfor %}

{% endif %}

{% if recieved_requests %}

<label> Users that want to add you to friends: </label>

{% for request in recieved_requests %}
<p>
  <div class="card w-50">
  <div class="card-body">
    <h5 class="card-title">{{request.from_user.login}}</h5>
    <h5 class="card-title">{{request.from_user.name}} {{request.from_user.surname}} wants too add you to FRIENDS</h5>
    <p class="card-text"></p>
    <p>
    <a href="{% url 'user' request.from_user.slug %}" class="btn btn-primary">Users page</a>
    <form id = "request_form" enctype="multipart/form-data" method = "post">{% csrf_token %}
      <input type="hidden" name="request_input" value="{{request.from_user.id}}"/>
      <p>
      <button name = "accept" type = "submit"> Accept </button>
      <button name = "decline" type = "submit"> Decline </button>
      </p>
    </form>
    </p>
  </div>
</div>
</p>

{% endfor %}
{% endif %}
{% endblock %}
