{% extends "general/index.html" %}
{% load static %}
{% block content %}
<p>
  About you:
</p>

<form id = 'data_edit_form' method="post" enctype="multipart/form-data">{% csrf_token %}
  <label>Your name: </label>
  <input type="text" name="name" value="{{user.name}}"><br>
  <label>Your surname: </label>
  <input type="text" name="surname" value="{{user.surname}}"><br>
  <label>Your email: </label>
  <input type="text" name="email" value="{{user.email}}"><br>
  <label>Your password: </label>
  <input type="text" name="password" value="{{user.password}}"><br>
  <label>Tiktok link: </label>
  <input type="text" name="tiktok" value="{{user.tiktok_link}}">
  <label id = "tiktok_label" class = "hidden" > Tiktok link is invalid </label><br>
  <label>Vk link: </label>
  <input type="text" name="vk" value="{{user.vk_link}}">
  <label id = "vk_label" class = "hidden" > Vk link is invalid </label><br>
  <label>Instagram link: </label>
  <input type="text" name="instagram" value="{{user.instagram_link}}">
  <label id = "instagram_label" class = "hidden" > Instagram link is invalid </label><br>
  <label>Facebook link: </label>
  <input type="text" name="facebook" value="{{user.facebook_link}}">
  <label id = "facebook_label" class = "hidden" > Facebook link is invalid </label><br>
  <label>Twitter link: </label>
  <input type="text" name="twitter" value="{{user.twitter_link}}">
  <label id = "twitter_label" class = "hidden" > Twitter link is invalid </label><br>
  {% if user.living_city %}
  <p>
  <h5><-------------------OCCUPATION-------------------></h5>
  <p><label> Your occupation:</label>
    <template id="resultstemplate">
      {% for occupation in occupations %}
        <option>{{ occupation.name }}</option>
      {% endfor %}
    </template>
  <input value="{{user.occupation.name}}" type="text" name="occupation_choice" id="search" class = 'input_field' list="searchresults" autocomplete="off" />
  <datalist id="searchresults"></datalist>
  </p>
  <h5><-------------------OCCUPATION-------------------></h5>
  </p>
  <label> Do you want to be a guide? </label>
  <p>
  <input type="radio" name="yes">Yes</input>
  </p>
  <p>
  <input type="radio" name="no">No</input>
  </p>
  {% endif %}
  <button id = "edit_button" name = "change_form" type = "submit">Submit</button>
</form>
<h3>Link validation: </h3>
<label id = "edit_label"></label>

{% if not_approved_request %}

<p>
  <div class="card w-50">
  <div class="card-body">
    <h5 class="card-title">{{not_approved_request.guide.login}}</h5>
    <h5 class="card-title">{{not_approved_request.guide.name}} {{not_approved_request.guide.surname}} wants to GUIDE you in city</h5>
    <p class="card-text"></p>
    <p>
    <a href="{% url 'user' not_approved_request.guide.slug %}" class="btn btn-primary">Users page</a>
    <form id = "approve_form" enctype="multipart/form-data" method = "post">{% csrf_token %}
      <input type="hidden" name="approve_input" value="{{not_approved_request.guide.id}}"/>
      <p>
      <button name = "approve_accept" type = "submit"> Accept </button>
      <button name = "approve_decline" type = "submit"> Decline </button>
      </p>
    </form>
    </p>
  </div>
</div>

{% endif %}

{% if recieved_guide_requests %}

<label> Users asking for a guide in a city: </label>

{% for request in recieved_guide_requests%}
<p>
  <div class="card w-50">
  <div class="card-body">
    <h5 class="card-title">{{request.requesting_user.login}}</h5>
    <h5 class="card-title">{{request.requesting_user.name}} {{request.requesting_user.surname}} wants you to GUIDE him/her in city</h5>
    <p class="card-text"></p>
    <p>
    <a href="{% url 'user' request.requesting_user.slug %}" class="btn btn-primary">Users page</a>
    <form id = "request_form" enctype="multipart/form-data" method = "post">{% csrf_token %}
      <input type="hidden" name="request_input" value="{{request.requesting_user.id}}"/>
      <p>
      <button name = "guide_accept" type = "submit"> Accept </button>
      </p>
    </form>
    </p>
  </div>
</div>

{% endfor %}

{% endif %}

{% if recieved_requests %}

<label> Users that want to add you to friends: </label>

{% for request in recieved_requests %}
<p>
  <div class="card w-50">
  <div class="card-body">
    <h5 class="card-title">{{request.from_user.login}}</h5>
    <h5 class="card-title">{{request.from_user.name}} {{request.from_user.surname}} wants too add you to FRIENDS</h5>
    <p class="card-text"></p>
    <p>
    <a href="{% url 'user' request.from_user.slug %}" class="btn btn-primary">Users page</a>
    <form id = "request_form" enctype="multipart/form-data" method = "post">{% csrf_token %}
      <input type="hidden" name="request_input" value="{{request.from_user.id}}"/>
      <p>
      <button name = "accept" type = "submit"> Accept </button>
      <button name = "decline" type = "submit"> Decline </button>
      </p>
    </form>
    </p>
  </div>
</div>
</p>

{% endfor %}
{% endif %}
<script type="text/javascript" src={% static "js/user_account2.js" %}></script>
{% endblock %}
